<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Flipbook PRO</title>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>

<!-- PageFlip -->
<script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.min.js"></script>

<style>
body {
  margin: 0;
  background: url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f') no-repeat center center fixed;
  background-size: cover;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: Arial, sans-serif;
}

#toolbar {
  margin: 10px;
}

button {
  padding: 8px 15px;
  margin: 5px;
  border: none;
  background: #222;
  color: white;
  cursor: pointer;
  border-radius: 5px;
}

button:hover {
  background: #444;
}

#flipbook {
  width: 90%;
  max-width: 900px;
  height: 85vh;
}
.page {
  background: white;
}
canvas {
  width: 100%;
  height: 100%;
}
#loader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
  z-index: 999;
}
</style>
</head>
<body>

<div id="loader">Loading Flipbook...</div>

<div id="toolbar">
  <button onclick="flipBook.flipPrev()">⬅ Prev</button>
  <button onclick="flipBook.flipNext()">Next ➡</button>
  <button onclick="zoomIn()">Zoom +</button>
  <button onclick="zoomOut()">Zoom -</button>
  <button onclick="goFullscreen()">Fullscreen</button>
</div>

<div id="flipbook"></div>

<script>
let flipBook;
let currentScale = 1.5;
const pdfUrl = "pdf/file.pdf";

pdfjsLib.getDocument(pdfUrl).promise.then(function(pdf) {

  flipBook = new St.PageFlip(
    document.getElementById("flipbook"),
    {
      width: 600,
      height: 800,
      size: "stretch",
      showCover: true,
      mobileScrollSupport: false
    }
  );

  let pages = [];
  for (let i = 1; i <= pdf.numPages; i++) {
    pdf.getPage(i).then(function(page) {
      let viewport = page.getViewport({ scale: currentScale });
      let canvas = document.createElement("canvas");
      let context = canvas.getContext("2d");

      canvas.width = viewport.width;
      canvas.height = viewport.height;

      page.render({
        canvasContext: context,
        viewport: viewport
      }).promise.then(function() {
        let div = document.createElement("div");
        div.className = "page";
        div.appendChild(canvas);
        pages.push(div);

        if (pages.length === pdf.numPages) {
          flipBook.loadFromHTML(pages);
          document.getElementById("loader").style.display = "none";
        }
      });
    });
  }
});

function zoomIn(){
  currentScale += 0.2;
  location.reload();
}

function zoomOut(){
  currentScale -= 0.2;
  location.reload();
}

function goFullscreen(){
  document.documentElement.requestFullscreen();
}
</script>

</body>
</html>
